CREATE OR REPLACE FUNCTION criar_dispensa(
    p_fk_nr_id_conta INT
)
RETURNS INT AS $$
DECLARE
    new_id INT;
BEGIN
    INSERT INTO dispensa (fk_nr_id_conta)
    VALUES (p_fk_nr_id_conta)
    RETURNING nr_id_dispensa INTO new_id;
    RETURN new_id;
END;
$$ LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION buscar_dispensa_por_id(
    p_nr_id_dispensa INT
)
RETURNS TABLE(
    nr_id_dispensa INT,
    fk_nr_id_conta INT
) AS $$
BEGIN
    RETURN QUERY
    SELECT nr_id_dispensa, fk_nr_id_conta
    FROM dispensa
    WHERE nr_id_dispensa = p_nr_id_dispensa;
END;
$$ LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION deletar_dispensa(
    p_nr_id_dispensa INT
)
RETURNS VOID AS $$
BEGIN
    DELETE FROM dispensa WHERE nr_id_dispensa = p_nr_id_dispensa;
END;
$$ LANGUAGE plpgsql;

