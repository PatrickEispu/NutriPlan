CREATE OR REPLACE FUNCTION criar_categoria_alimento(
    p_nm_categoria VARCHAR
)
RETURNS INT AS $$
DECLARE
    new_id INT;
BEGIN
    INSERT INTO categoria_alimento (nm_categoria)
    VALUES (p_nm_categoria)
    RETURNING nr_id_categoria_alimento INTO new_id;
    RETURN new_id;
END;
$$ LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION buscar_categoria_alimento_por_id(
    p_nr_id_categoria_alimento INT
)
RETURNS TABLE(
    nr_id_categoria_alimento INT,
    nm_categoria VARCHAR
) AS $$
BEGIN
    RETURN QUERY
    SELECT nr_id_categoria_alimento, nm_categoria
    FROM categoria_alimento
    WHERE nr_id_categoria_alimento = p_nr_id_categoria_alimento;
END;
$$ LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION buscar_categoria_alimento_por_nome(
    p_nm_categoria VARCHAR
)
RETURNS TABLE(
    nr_id_categoria_alimento INT,
    nm_categoria VARCHAR
) AS $$
BEGIN
    RETURN QUERY
    SELECT c.nr_id_categoria_alimento, c.nm_categoria
    FROM categoria_alimento c
    WHERE c.nm_categoria = p_nm_categoria;
END;
$$ LANGUAGE plpgsql;






