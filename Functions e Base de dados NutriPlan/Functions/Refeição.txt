CREATE OR REPLACE FUNCTION criar_refeicao(
    p_fk_nr_id_conta INT
)
RETURNS INT AS $$
DECLARE
    new_id INT;
BEGIN
    INSERT INTO refeicao (fk_nr_id_conta)
    VALUES (p_fk_nr_id_conta)
    RETURNING nr_id_refeicao INTO new_id;
    RETURN new_id;
END;
$$ LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION buscar_refeicao_por_id(
    p_nr_id_refeicao INT
)
RETURNS TABLE(
    nr_id_refeicao INT,
    fk_nr_id_conta INT
) AS $$
BEGIN
    RETURN QUERY
    SELECT nr_id_refeicao, fk_nr_id_conta
    FROM refeicao
    WHERE nr_id_refeicao = p_nr_id_refeicao;
END;
$$ LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION deletar_refeicao(
    p_nr_id_refeicao INT
)
RETURNS VOID AS $$
BEGIN
    DELETE FROM refeicao WHERE nr_id_refeicao = p_nr_id_refeicao;
END;
$$ LANGUAGE plpgsql;
